@for (subAttachment of subAttachmentsSignal(); let i = $index; track subAttachment.url) {
  @if (i === 0) {
    <app-media
      [class.active]="subAttachment.url === currentSubAttachment().url"
      [type]="subAttachment.type"
      [media]="subAttachment.media">
    </app-media>
  } @else {
    @defer (prefetch on idle) {
      <app-media
        [class.active]="subAttachment.url === currentSubAttachment().url"
        [type]="subAttachment.type"
        [media]="subAttachment.media">
      </app-media>
    }
  }
}
<button mat-icon-button class="carousel-control prev" (click)="prevSlide()">
  <mat-icon>arrow_back</mat-icon>
</button>
<button mat-icon-button class="carousel-control next" (click)="nextSlide()">
  <mat-icon>arrow_forward</mat-icon>
</button>
